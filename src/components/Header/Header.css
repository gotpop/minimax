@scope {
  :scope {
    --animationStartsAfter: 70vh;
    --animationDistance: 500px;
    --surfaceColorStart: hsl(0 10% 5%);
    --surfaceColorEnd: hsl(0 50% 90% / 0.1);
    --textColorStart: hsl(0 10% 90%);
    --textColorEnd: hsl(0 10% 90%);
    --nav-columns: 6 / col-end;
    --header-columns: col;
    --logoDisplay: flex;

    background-color: #ffffff;
    animation: stickyNav linear forwards;
    backdrop-filter: blur(0.35rem);
    border-radius: 0;
    color: var(--textColorStart);
    display: grid;
    grid-template-columns: subgrid;
    position: sticky;
    top: -8rem;
    z-index: 1000;
    grid-column: var(--header-columns);
    scroll-snap-align: start;

    animation-timeline: view();
    animation-range-start: calc(
      100vh + var(--animationStartsAfter)
    );
    animation-range-end: calc(
      100vh + var(--animationStartsAfter) +
        var(--animationDistance)
    );

    .logo {
      display: var(--logoDisplay);
      fill: currentColor;
    }

    a {
      color: inherit;
      text-decoration: none;
      font-weight: 500;
      color: #383838;

      &:hover,
      &:focus {
        color: var(--clr-primary-300);
        text-decoration: underline;
        text-decoration-thickness: 0.07lh;
        text-underline-offset: 0.17lh;
      }
    }

    .logo {
      grid-column: 1 / span 3;
    }

    .nav {
      align-items: center;
      display: grid;
      gap: 2rem;
      grid-column: var(--nav-columns);
      grid-template-columns: subgrid;
      margin: var(--nav-margin, 0 1rem);
    }
  }
}

@keyframes stickyNav {
  1% {
    scroll-snap-align: unset;
  }

  0%,
  100% {
    --headerWidth: fit-content;
    --logoDisplay: none;
    --nav-columns: 3 / span 2;
    --nav-margin: 0;
    --header-columns: 6 / span 6;
  }

  100% {
    scroll-snap-align: unset;
    top: 3rem;
    color: var(--textColorEnd);
    border-radius: 100vw;
    background-color: var(--surfaceColorEnd);
    padding: 1.5rem 0;
    box-shadow: inset 0 0 0.5rem hsl(0 0% 100% / 0.1),
      0 0 0.75rem hsl(0 0% 0% / 0.3);
  }
}
